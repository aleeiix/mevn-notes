(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["notes"],{"0841":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h1",[t._v("Notes")]),n("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:t.message.color},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(t._s(t.message.text))]),t.editMode?t._e():n("form",{on:{submit:function(e){return e.preventDefault(),t.addNote()}}},[n("h3",[t._v("Add a new note")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newNote.name,expression:"newNote.name"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newNote.name},on:{input:function(e){e.target.composing||t.$set(t.newNote,"name",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newNote.description,expression:"newNote.description"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Description"},domProps:{value:t.newNote.description},on:{input:function(e){e.target.composing||t.$set(t.newNote,"description",e.target.value)}}}),n("b-button",{staticClass:"btn-success btn-block mt-2 mb-4",attrs:{type:"submit"}},[t._v("Add")])],1),t.editMode?n("form",{on:{submit:function(e){return e.preventDefault(),t.updateNote()}}},[n("h3",[t._v("Edit a note")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editNote.name,expression:"editNote.name"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.editNote.name},on:{input:function(e){e.target.composing||t.$set(t.editNote,"name",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editNote.description,expression:"editNote.description"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Description"},domProps:{value:t.editNote.description},on:{input:function(e){e.target.composing||t.$set(t.editNote,"description",e.target.value)}}}),n("b-button",{staticClass:"btn-warning btn-block mt-2 mb-2",attrs:{type:"submit"}},[t._v("Edit")]),n("b-button",{staticClass:"btn-default btn-block mt-2 mb-4",on:{click:function(e){return t.cancelEditMode()}}},[t._v("Cancel")])],1):t._e(),n("table",{staticClass:"table"},[t._m(0),n("tbody",t._l(t.notes,(function(e,o){return n("tr",{key:o},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e._id))]),n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.description))]),n("td",[n("b-button",{staticClass:"btn-sm btn-warning mr-2",on:{click:function(n){return t.activeEditMode(e._id)}}},[t._v("Edit")]),n("b-button",{staticClass:"btn-sm btn-danger",on:{click:function(n){return t.deleteNote(e._id)}}},[t._v("Delete")])],1)])})),0)]),n("b-pagination",{attrs:{value:t.currentPage,"total-rows":t.totalNotes,"per-page":t.limit,"aria-controls":"my-table"},on:{change:t.changePage}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Description")]),n("th",{attrs:{scope:"col"}},[t._v("Actions")])])])}],s=(n("99af"),n("4de4"),n("d81d"),n("b0c0"),n("5530")),a=n("2f62"),r={name:"Notes",data:function(){return{notes:[],totalNotes:0,limit:5,newNote:{name:"",description:""},editNote:{_id:"",name:"",description:""},message:{text:"",color:""},editMode:!1,dismissSecs:5,dismissCountDown:0}},computed:Object(s["a"])({},Object(a["c"])(["token"]),{currentPage:function(){return parseInt(this.$route.query.page)||1}}),watch:{"$route.query.page":{immediate:!0,handler:function(t){var e=parseInt(t)||1;this.pagination(e)}}},methods:{changePage:function(t){this.$router.push({query:{page:t}})},getConfigAxios:function(){var t={headers:{Authorization:this.token}};return t},pagination:function(t){var e=this,n=(t-1)*this.limit;this.axios.get("/note?limit=".concat(this.limit,"&skip=").concat(n),this.getConfigAxios()).then((function(t){e.notes=t.data.data,e.totalNotes=t.data.total})).catch((function(t){console.error(t.response),e.createAlertAndShow("Error","danger")}))},addNote:function(){var t=this;this.axios.post("/note",this.newNote,this.getConfigAxios()).then((function(e){t.notes.push(e.data),t.newNote={name:"",description:""},t.createAlertAndShow("Added note","success")})).catch((function(e){console.error(e.response),e.response.data.error.errors.name.message?t.createAlertAndShow(e.response.data.error.errors.name.message,"danger"):t.createAlertAndShow("Internal error","danger")}))},deleteNote:function(t){var e=this;this.axios.delete("/note/".concat(t),this.getConfigAxios()).then((function(t){e.notes=e.notes.filter((function(e){return e._id!==t.data._id})),e.createAlertAndShow("Note removed","success")})).catch((function(t){console.error(t.response),t.response.data.message?e.createAlertAndShow(t.response.data.message,"danger"):e.createAlertAndShow("Internal error","danger")}))},activeEditMode:function(t){var e=this;this.editMode=!0,this.axios.get("/note/".concat(t)).then((function(t){e.editNote=t.data})).catch((function(t){console.error(t)}))},cancelEditMode:function(){this.editMode=!1,this.editNote={_id:"",name:"",description:""}},updateNote:function(){var t=this;this.axios.put("/note/".concat(this.editNote._id),this.editNote,this.getConfigAxios()).then((function(e){t.notes=t.notes.map((function(t){return t._id===e.data._id?e.data:t})),t.cancelEditMode(),t.createAlertAndShow("Note edited","success")})).catch((function(e){console.error(e),e.response.data.message?t.createAlertAndShow(e.response.data.message,"danger"):t.createAlertAndShow("Internal error","danger")}))},createAlertAndShow:function(t,e){this.message.text=t,this.message.color=e,this.showAlert()},showAlert:function(){this.dismissCountDown=this.dismissSecs},countDownChanged:function(t){this.dismissCountDown=t}}},c=r,d=n("2877"),u=Object(d["a"])(c,o,i,!1,null,null,null);e["default"]=u.exports},"99af":function(t,e,n){"use strict";var o=n("23e7"),i=n("d039"),s=n("e8b5"),a=n("861d"),r=n("7b0b"),c=n("50c4"),d=n("8418"),u=n("65f0"),l=n("1dde"),m=n("b622"),p=n("2d00"),h=m("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=l("concat"),w=function(t){if(!a(t))return!1;var e=t[h];return void 0!==e?!!e:s(t)},N=!v||!b;o({target:"Array",proto:!0,forced:N},{concat:function(t){var e,n,o,i,s,a=r(this),l=u(a,0),m=0;for(e=-1,o=arguments.length;e<o;e++)if(s=-1===e?a:arguments[e],w(s)){if(i=c(s.length),m+i>f)throw TypeError(g);for(n=0;n<i;n++,m++)n in s&&d(l,m,s[n])}else{if(m>=f)throw TypeError(g);d(l,m++,s)}return l.length=m,l}})},b0c0:function(t,e,n){var o=n("83ab"),i=n("9bf2").f,s=Function.prototype,a=s.toString,r=/^\s*function ([^ (]*)/,c="name";o&&!(c in s)&&i(s,c,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},d81d:function(t,e,n){"use strict";var o=n("23e7"),i=n("b727").map,s=n("1dde"),a=n("ae40"),r=s("map"),c=a("map");o({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=notes.02569052.js.map